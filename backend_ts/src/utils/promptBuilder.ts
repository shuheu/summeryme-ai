export function buildArticleSummaryPrompt(url: string): {
  systemInstruction: string;
  prompt: string;
} {
  const systemInstruction = `あなたは要約のエキスパートであり、URLから記事の簡潔な要約を作成できます。要約は正確で、記事の要点を捉えており、指定されたルール、長さと言語の制約を遵守しています。`;
  const prompt = `以下のURLにある記事を要約してください。

${url}

- 要約にあたっては、以下のルールに従ってください。
- URLにアクセスできない場合、またはURLの記事を読み取れない場合は、その旨を明確に伝えてください。その場合、要約は実行しないでください。
- 要約は必ず日本語で記述してください。使用する言語は、フォーマルでプロフェッショナルなものとします。
- 要約は必ず500文字以内としてください。
- 回答は必ず要約のみを含めてください。導入や結論の記述は不要です。
- 要約は、提供されたURLにあるメインの記事の内容に焦点を当ててください。記事が他の記事を参照している場合、要約は主にメインの記事の内容を扱い、参照されている記事の内容は扱いません。
- 要約する前に、URLの内容が正確に読み取られ、理解されていることを確認してください。
- 要約は、記事の3つのキーポイントから始めてください。キーポイントの後、記事の内容の要約を提供してください。

出力形式
キーポイント:
・<3つの重要なキーポイント>

要約:
<記事の要約>`;
  return {
    systemInstruction,
    prompt,
  };
}

export function buildSummarizedTalkScriptPrompt(urls: string[]): {
  systemInstruction: string;
  prompt: string;
} {
  const systemInstruction = `あなたは、指定された複数のURLから記事を要約し、トークスクリプトのルールを遵守し、その要約内容をもとに2人の人物が対話する形式のトークスクリプトを作成するエキスパートです。`;
  const prompt = `対象URL:

${urls.join('\n')}
トークスクリプトのルール:
1.  **登場人物:** Speaker1とSpeaker2の2人が会話する形式で記述してください。
2.  **発言表示:** 各セリフの前に「Speaker1: 」または「Speaker2: 」を必ず記述してください。
3.  **内容網羅:** 要約内容は、すべての記事の内容を網羅するようにしてください。重要な情報が欠落しないように注意してください。
4.  **言語:** 台本は日本語で記述してください。
5.  **口調:** Speaker1とSpeaker2で口調や専門性に差をつけることで、会話に深みを持たせてください。
6.  **情報源:** 各セリフの内容が、どのURLの記事に基づいているかを明確にするためどの記事について話しているかを明確にしてください。特に、新しい記事について話し始める際は、まずどの記事について話しているかを明確にしてください。複数のURLがある場合は、どの記事について話しているかを明確にしてください。セリフの中にURLを含めないでください。
7.  **記事間の関連性:** 記事と記事に関連性がある場合は、それらを抽出し、関連性について説明してください。記事の関連を見つけ出して、より議論を発展させてください。会話が記事から記事へ自然に移行するようにしてください。
8.  **長さ:** トークスクリプトの長さを2000字程度にしてください。
9.  **理解度チェック:** 最後に、記事に関する理解度を促進するための問いかけや質問をして、理解度を確認させてください。理解度チェックについての質問もトークスクリプトの形式（Speaker1: または Speaker2:）を守ってください。
10. **URL読み取りエラー処理:** URLの記事が読み取れない場合は、その旨を最初に伝えるようにトークスクリプトを作成してください。
11. **出力形式:** レスポンスには生成された台本のみを返してください。以下の例の形式以外は含めないこと


例:

Speaker1: 最近登録された記事についてご紹介します。最近のAI技術の進歩についてどう思いますか？
Speaker2: 私は特に自然言語処理の分野に注目しています。`;

  return {
    systemInstruction,
    prompt,
  };
}

export function buildUserDailySummaryPrompt(urls: string[]): {
  systemInstruction: string;
  prompt: string;
} {
  const systemInstruction = `あなたは日次要約のエキスパートであり、複数のURLから記事を分析し、ユーザー向けの日次要約を生成できます。`;
  const prompt = `以下の複数のURLから記事を分析し、ユーザー向けの日次要約を生成してください。
各URL:
${urls.join('\n')}
日次要約のルール:
- 各記事の重要なポイントを簡潔にまとめてください。
- 関連性のある記事がある場合は、それらの共通点や違いを指摘してください。
- 要約は日本語で記述してください。
- 要約全体で800文字以内にまとめてください。
- 情報量が多い場合は、最も重要な内容を優先してください。
- レスポンスには要約のみを返してください。

出力形式
キーポイント:
・<3つの重要なキーポイント>

要約:
<記事の要約>`;

  return {
    systemInstruction,
    prompt,
  };
}
